!function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function r(){return Object.create(null)}function s(t){t.forEach(o)}function i(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}const l="undefined"!=typeof window;let u=l?()=>window.performance.now():()=>Date.now(),d=l?t=>requestAnimationFrame(t):t;const f=new Set;function h(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&d(h)}function p(t,e){t.appendChild(e)}function m(t){t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function g(){return t=" ",document.createTextNode(t);var t}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function w(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}let v;function x(t){v=t}const $=[],j=[],E=[],_=[],k=Promise.resolve();let A=!1;function C(t){E.push(t)}let M=!1;const S=new Set;function T(){if(!M){M=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];x(e),O(e.$$)}for(x(null),$.length=0;j.length;)j.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];S.has(e)||(S.add(e),e())}E.length=0}while($.length);for(;_.length;)_.pop()();A=!1,M=!1,S.clear()}}function O(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const q=new Set;function z(t,e){-1===t.$$.dirty[0]&&($.push(t),A||(A=!0,k.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(e,n,c,a,l,u,d=[-1]){const f=v;x(e);const h=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:n.context||[]),callbacks:r(),dirty:d,skip_bound:!1};let p=!1;if(h.ctx=c?c(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return h.ctx&&l(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),p&&z(e,t)),n})):[],h.update(),p=!0,s(h.before_update),h.fragment=!!a&&a(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(m)}else h.fragment&&h.fragment.c();n.intro&&((y=e.$$.fragment)&&y.i&&(q.delete(y),y.i(g))),function(t,e,n,r){const{fragment:c,on_mount:a,on_destroy:l,after_update:u}=t.$$;c&&c.m(e,n),r||C((()=>{const e=a.map(o).filter(i);l?l.push(...e):s(e),t.$$.on_mount=[]})),u.forEach(C)}(e,n.target,n.anchor,n.customElement),T()}var y,g;x(f)}const P=[];function L(e,n=t){let o;const r=[];function s(t){if(c(e,t)&&(e=t,o)){const t=!P.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),P.push(n,e)}if(t){for(let t=0;t<P.length;t+=2)P[t][0](P[t+1]);P.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(i,c=t){const a=[i,c];return r.push(a),1===r.length&&(o=n(s)||t),i(e),()=>{const t=r.indexOf(a);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}function R(t){return"[object Date]"===Object.prototype.toString.call(t)}function I(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map(((e,n)=>I(t[n],e)));return t=>n.map((e=>e(t)))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(R(t)&&R(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),o={};return n.forEach((n=>{o[n]=I(t[n],e[n])})),t=>{const e={};return n.forEach((n=>{e[n]=o[n](t)})),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}const N=function(t,o={}){const r=L(t);let s,i=t;function c(c,a){if(null==t)return r.set(t=c),Promise.resolve();i=c;let l=s,p=!1,{delay:m=0,duration:y=400,easing:g=e,interpolate:b=I}=n(n({},o),a);if(0===y)return l&&(l.abort(),l=null),r.set(t=i),Promise.resolve();const w=u()+m;let v;return s=function(t){let e;return 0===f.size&&d(h),{promise:new Promise((n=>{f.add(e={c:t,f:n})})),abort(){f.delete(e)}}}((e=>{if(e<w)return!0;p||(v=b(t,c),"function"==typeof y&&(y=y(t,c)),p=!0),l&&(l.abort(),l=null);const n=e-w;return n>y?(r.set(t=c),!1):(r.set(t=v(g(n/y))),!0)})),s.promise}return{set:c,update:(e,n)=>c(e(i,t),n),subscribe:r.subscribe}}(0),D=L(0),J=L(1),F=L("visible");let H={v:!1};window.s=H;var U=function(t){var e=/(%?)(%([jds]))/g,n=Array.prototype.slice.call(arguments,1);return n.length&&(t=t.replace(e,(function(t,e,o,r){var s=n.shift();switch(r){case"s":s=""+s;break;case"d":s=Number(s);break;case"j":s=JSON.stringify(s)}return e?(n.unshift(s),t):s}))),n.length&&(t+=" "+n.join(" ")),""+(t=t.replace(/%{2,2}/g,"%"))};const G="מוריד את קובץ %s...",K="דוחס את קובץ %s...",Z="הקובץ מוכן להורדה!",Q="מקובץ %s ירדו %s מתוך %s";async function V(){await async function(t){const e=document.createElement("script");e.type="text/javascript",e.src=t,document.head.appendChild(e),await new Promise((t=>e.onload=t))}("https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.min.js");const t=document.querySelectorAll("audio > source");let e=new window.JSZip;D.set(t.length);let n=0;for(const o of t){if(H.v)throw new Error("window closed!");let t=o.src.replace("http://","https://");const r=t.split("/").pop();Y(U(G,r));const s=await W(t);Y(U(K,r)),e.file(r,s,{binary:!0}),n++,N.set(n)}Y(U(Z)),await async function(t){const e=document.querySelector(".album-title").innerText,n=document.querySelector(".arts_name").innerText,o=`${e} - ${n}`;!async function(t,e){var n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download=e||"download",document.body.appendChild(o),o.click(),o.remove()}(await t.generateAsync({type:"blob"}),o)}(e)}function W(t,e=0){let n;const o=new Promise((async(o,r)=>{const s=t.split("/").pop();n=fetch(t,{headers:{Range:"bytes=0-"}});const i=await n;if(i.status<200||i.status>=400){if(!(e<5))throw r(),i;e++,Y("!!!"),await new Promise((t=>setTimeout(t,1e3))),o(W(t,e))}const c=i.body.getReader(),a=i.headers.get("Content-Length");let l=0;const u=new Response(new ReadableStream({async start(t){const e=setInterval((()=>{Y(U(Q,s,X(l),X(a)))}),1e3);for(;;){if(H.v)throw clearInterval(e),t.close(),new Error("window closed!");const{done:n,value:o}=await c.read();if(n){clearInterval(e);break}l+=o.length,t.enqueue(o)}t.close()}}));o(await u.blob())}));return o.res=n,o}function X(t){if(0==t)return"0 Byte";var e=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return Math.round(t/Math.pow(1024,e),2)+" "+["Bytes","KB","MB","GB","TB"][e]}function Y(t){console.log(t);const e=document.querySelector("#text");e.innerText+=t+"\n",e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}const tt=document.createElement("div");function et(){H.v=!0,J.set(0),F.set("hidden"),setTimeout((()=>{tt.remove()}),3e3)}function nt(e){let n,o,r,s,i,c,a,l,u,d,f,h,v,x;return{c(){n=y("div"),o=y("div"),r=y("div"),r.textContent="הורדה מאתר Jewish-music.Fm",s=g(),i=y("div"),c=g(),a=y("div"),l=y("progress"),u=g(),d=y("div"),f=g(),h=y("div"),h.innerHTML='<a href="https://github.com/MusiCode1/jewish-music.fm" target="_"><em>MusiCode</em></a>',b(r,"id","window-text"),b(r,"class","svelte-yhmsn2"),b(i,"id","close"),b(i,"class","svelte-yhmsn2"),b(o,"id","bar"),b(o,"class","svelte-yhmsn2"),l.value=e[2],b(l,"max",e[3]),b(l,"class","svelte-yhmsn2"),b(d,"id","text"),b(d,"class","svelte-yhmsn2"),b(h,"id","credit"),b(h,"class","svelte-yhmsn2"),b(a,"id","window-content"),b(a,"class","svelte-yhmsn2"),b(n,"id","window"),w(n,"visibility",e[0]),w(n,"opacity",e[1]),b(n,"class","svelte-yhmsn2")},m(t,e){var m,y,g,b;!function(t,e,n){t.insertBefore(e,n||null)}(t,n,e),p(n,o),p(o,r),p(o,s),p(o,i),p(n,c),p(n,a),p(a,l),p(a,u),p(a,d),p(a,f),p(a,h),v||(y="click",g=et,(m=i).addEventListener(y,g,b),x=()=>m.removeEventListener(y,g,b),v=!0)},p(t,[e]){4&e&&(l.value=t[2]),8&e&&b(l,"max",t[3]),1&e&&w(n,"visibility",t[0]),2&e&&w(n,"opacity",t[1])},i:t,o:t,d(t){t&&m(n),v=!1,x()}}}function ot(t,e,n){let o,r,s,i;return a(t,F,(t=>n(0,o=t))),a(t,J,(t=>n(1,r=t))),a(t,N,(t=>n(2,s=t))),a(t,D,(t=>n(3,i=t))),[o,r,s,i]}tt.classList.add("app"),document.body.appendChild(tt);class rt extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){var e;super(),document.getElementById("svelte-yhmsn2-style")||((e=y("style")).id="svelte-yhmsn2-style",e.textContent="#window.svelte-yhmsn2{position:fixed;left:10%;right:10%;top:20%;bottom:20%;max-width:660px;margin:auto;backdrop-filter:blur(8px);border-radius:30px;background:rgba(255, 255, 255, 0.73);box-shadow:0px 0px 13px 1px;transition:all 3s ease-out;z-index:20}#bar.svelte-yhmsn2{position:absolute;height:50px;left:0;right:0;background:#7c7c7c;border-radius:30px 30px 0px 0px}#window-text.svelte-yhmsn2{height:100%;display:flex;align-items:center;justify-content:space-around;font-size:24px;line-height:28px;color:#ececec;font-family:system-ui}#close.svelte-yhmsn2{position:absolute;width:20px;height:20px;left:40px;top:15px;background:#de4f4f;border-radius:50%}#close.svelte-yhmsn2:hover{background:#f87878}#window-content.svelte-yhmsn2{position:relative;top:50px;padding:2em;height:calc(100% - 50px);box-sizing:border-box}progress.svelte-yhmsn2{width:100%;height:50px}#text.svelte-yhmsn2{font-size:20px;font-family:system-ui;overflow-y:scroll;height:calc(100% - 50px);direction:rtl}#credit.svelte-yhmsn2{text-align:left;color:#b6abab}",p(document.head,e)),B(this,t,ot,nt,c,{})}}(async()=>{try{console.log("Musicode7"),console.log("https://gist.github.com/MusiCode1/c50432ad3f413a958e6f3aea7c214cfc"),function(){const t=document.querySelectorAll("audio > source");if("jewishmusic.fm"!=window.location.hostname)throw new Error("זה איננו jewishmusic.fm!");if(t.length<1)throw new Error("אין בדף זה קבצי מוזיקה!")}(),new rt({target:tt}),V().finally((()=>{et()}))}catch(t){throw"window closed!"===t.massage?(console.log(t.massage),t):(alert(t),t)}})()}();
